<h2>Introduction</h2>

<p>Le code fourni a pour but de vous décharger du travail d'analyse d'une ligne de commande,
avant son interprétation par le shell. Il propose une fonction <code>readcmd()</code> qui fournit
le résultat de cette analyse.</p>

<p>Le source est fourni non pas à titre d'exemple (il n'est pas d'une clarté éblouissante),
mais à titre de documentation (et de spécification :)) ;  il n'est ni
 nécessaire, ni conseillé de le modifier pour réaliser le travail demandé : l'analyse
 réalisée est suffisante pour la syntaxe des commandes que votre shell doit interpréter.</p>

<p> Ce code est a priori tout à fait fiable, mais n'hésitez cependant pas à nous signaler
 ce qui vous apparaîtrait comme des anomalies, ou des lacunes dans la documentation.</p>

<h2>La structure <code>cmdline</code></h2>

<p>L'appel à readcmd() retourne une structure cmdline, qui contient le résultat de l'analyse
de la ligne de commande pour le shell.
Cette structure contient notamment :</p>

<ul>
<li>l'indication du fait que la commande doit être lancée en tâche de fond ou non</li>
<li>les redirections éventuelles</li>
<li>la décomposition de la ligne de commande en commandes élémentaires, et la décomposition
de chaque commande en mots. Le champ <code>seq</code> référence le résultat de cette décomposition,
qui est vu comme un tableau à deux dimensions [commandes élémentaires, mots de la commande]</li>
</ul>


<p> Pour plus de détails, voir le fichier d'en-tête <code>readcmd.h</code>.</p>

<h2> Exemples :</h2>

<ul>
<li>&ldquo;ls -l&rdquo; : seq[0][0] = &ldquo;ls&rdquo;, seq[0][1] = &ldquo;-l&rdquo;, seq[0][2] = NULL, seq[1] = NULL, backgrounded = NULL, in = NULL, out = NULL</li>
<li>&ldquo;ls -l > toto&rdquo; : seq[0][0] = &ldquo;ls&rdquo;, seq[0][1] = &ldquo;-l&rdquo;, seq[0][2] = NULL,
seq[1] = NULL, backgrounded = NULL, in = NULL, out => &ldquo;toto&rdquo;</li>
<li>&ldquo;ls | grep toto | wc -l&rdquo; : seq[0][0] = &ldquo;ls&rdquo;, seq[0][1] = NULL,
seq[1][0] = &ldquo;grep&rdquo;, seq[1][1] = &ldquo;toto&rdquo;,  seq[1][2] = NULL,
seq[2][0] = &ldquo;wc&rdquo;, seq[0][1] = &ldquo;-l&rdquo;, seq[0][2] = NULL,
seq[3] = NULL, backgrounded = NULL, in = NULL, out = NULL</li>
<li>&ldquo;sleep 100 &amp;&rdquo; : seq[0][0] = &ldquo;sleep&rdquo;, seq[0][1] = &ldquo;20&rdquo;,  backgrounded != NULL, in = NULL, out = NULL</li>
</ul>

